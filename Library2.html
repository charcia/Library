<!DOCTYPE html>

<html lang="eng">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="Library.css">
    </head>
    
    <body>
        <div class="form-popup" id="myForm">
            <form action="#" method="get" id="form">
                <div>
                    <label for="author">Author's Name: </label>
                    <input type="text" name="author" id="author" class="input" minlength="3"> 
                </div>
                <div>
                    <label for="title">Title: </label>
                    <input type="text" name="title" id="title" class="input" minlength="3"> 
                </div>
                <div>
                    <label for="pages">Number of pages: </label>
                    <input type="number" name="pages" id="pages" class="input"> 
                </div>
                <input type="submit" id='submit'>
            </form>
        </div>
        <button id="open-form">Add book</button>
        <p id="NumBooks">Here is the number of books in inventory: </p>
        <button id="displayBooks">Display books</button>
        <p id="Text"></p>
        <div id="parent">

        </div>

    </body>

    <script>
        var myLibrary=[];
        var newBook=[];
        var Keys=[];
        var Values=[];
        var Lib_len=0;

        function Book(Title,Author,Pages){
            this.author=Author;
            this.title=Title;
            this.pages=Pages;
        }


        function display_books(){
            parent.innerHTML=''
            Lib_len=myLibrary.length;
            for (var book of myLibrary){
                var newCard=document.createElement('div');
                newCard.id=myLibrary.indexOf(book);
                newCard.className='Card';
                parent.appendChild(newCard);
                var keyList=Object.keys(book);
                var valueList=Object.values(book);
                for (let i=0;i<keyList.length;i++){
                    var newLine=document.createElement('p');
                    newCard.appendChild(newLine);
                    newLine.innerHTML=keyList[i]+': '+valueList[i]+'<br>';
                };
            };
        }

        function addBookToLibrary(event){
            event.preventDefault();
            var Title=document.getElementById('title').value;
            var Author=document.getElementById('author').value;
            var Pages=document.getElementById('pages').value;
            newBook=new Book(Title,Author,Pages);
            myLibrary.push(newBook);
            text.innerHTML=myLibrary.length;
            form.reset();
            myForm.style.display='none';
        }

        function displayForm(){
            myForm.style.display='block';
        }

        function deleteBook(Card_Id){
            parent.removeChild(document.getElementById(Card_Id));
        }

        function listenButton(){
            alert('mouseOver');
        }


        const submit=document.getElementById('submit');
        const output=document.getElementById('output');
        const form=document.getElementById('form');
        const parent=document.getElementById('parent');
        const myForm=document.getElementById('myForm');
        const popup=document.getElementById('open-form');
        const display=document.getElementById('displayBooks');
        const text=document.getElementById('Text');

        var remove_button=document.getElementsByClassName('deleteBook');
        var buttons=document.querySelectorAll('button');

        form.addEventListener('submit',function(){addBookToLibrary(event)});
        popup.addEventListener('click',function(){displayForm()});
        display.addEventListener('click',function(){display_books()});

        document.addEventListener('DOMNodeInserted',function(){
            
        });
        
       document.getElementById('parent').addEventListener('click',function(event){
            
        });

    </script>

</html>