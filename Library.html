<!DOCTYPE html>

<html lang="eng">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="Library.css">
    </head>
    
    <body>
        <div class="form-popup" id="myForm">
            <form action="#" method="get" id="form">
                <div>
                    <label for="author">Author's Name: </label>
                    <input type="text" name="author" id="author" class="input"> 
                </div>
                <div>
                    <label for="title">Title: </label>
                    <input type="text" name="title" id="title" class="input"> 
                </div>
                <div>
                    <label for="pages">Number of pages: </label>
                    <input type="number" name="pages" id="pages" class="input"> 
                </div>
                <input type="submit" id='submit'>
            </form>
        </div>
        <button id="open-form">Add book</button>
        <div id="parent">

        </div>

    </body>

    <script>
        var myLibrary=[];
        var newBook=[];
        var Keys=[];
        var Values=[];

        function Book(Title,Author,Pages){
            this.author=Author;
            this.title=Title;
            this.pages=Pages;
        }


        function display_books(){
            var count=myLibrary.length;
            var newCard=document.createElement('div');
            newCard.className='Card';
            parent.appendChild(newCard);
            var newBook_len=(Object.keys(newBook)).length;
            Keys=Object.keys(newBook);
            Values=Object.values(newBook);
            for (let i=0;i<newBook_len;i++){
                var newRow=document.createElement('p');
                newCard.appendChild(newRow);
                var sentence=JSON.stringify(Keys[i]) +' : '+ JSON.stringify(Values[i])
                newRow.innerHTML=sentence.replaceAll('"',' ')
            };
            var removeBook=document.createElement('button');
            removeBook.id=newBook.title;
            removeBook.innerHTML='Remove book';
            newCard.appendChild(removeBook);
            removeBook.style.width='fit-content';
            removeBook.style.height='25px';
            form.reset();
            myForm.style.display='none';
        }

        function addBookToLibrary(event){
            event.preventDefault();
            var Title=document.getElementById('title').value;
            var Author=document.getElementById('author').value;
            var Pages=document.getElementById('pages').value;
            newBook=new Book(Title,Author,Pages)
            myLibrary.push(newBook);
            display_books();
        }

        function displayForm(){
            myForm.style.display='block';
        }

        function deleteBook(){
            parent.removeChild();
        }


        const submit=document.getElementById('submit');
        const output=document.getElementById('output');
        const form=document.getElementById('form');
        const parent=document.getElementById('parent');
        const myForm=document.getElementById('myForm');
        const popup=document.getElementById('open-form');

        form.addEventListener('submit',function(){addBookToLibrary(event)});
        popup.addEventListener('click',function(){displayForm()});
        document.querySelectorAll('button').forEach(occurence=>{
            let id=occurence.getAttribute('id');
            occurence.addEventListener('click',function(){
                deleteBook();
            })
        })


    </script>

</html>